<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>What can be gleaned about GFS successor codenamed Colossus? | Pierre Zemb&#x27;s Blog</title>
  <meta name="title" content="What can be gleaned about GFS successor codenamed Colossus?">
<meta name="description" content="Pierre Zemb personal blog">
<meta name="author" content="Pierre Zemb">

<!-- Twitter Card tags -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@pierrez" />
<meta name="twitter:creator" content="@pierrez" />
<meta name="twitter:title" content="What can be gleaned about GFS successor codenamed Colossus?" />
<meta name="twitter:description" content="Pierre Zemb personal blog" />

<meta name="twitter:image" content="https://pierrezemb.fr/images/myself.jpg" />


<!-- OpenGraph tags -->
<meta property="og:type" content="article" />
<meta property="og:locale" content="en_US" />
<meta property="og:site_name" content="Pierre Zemb&#x27;s Blog">
<meta property="og:title" content="What can be gleaned about GFS successor codenamed Colossus?">
<meta property="og:description" content="Pierre Zemb personal blog"> 
<meta property="og:url" content="https://pierrezemb.fr/posts/colossus-google/">

<meta property="og:image" content="https://pierrezemb.fr/images/myself.jpg" />

<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />


<meta property="article:published_time" content="2019-08-04T15:07:11+02:00" />



<meta property="article:tag" content="storage" />

<meta property="article:tag" content="distributed" />

<meta property="article:tag" content="google" />

<meta property="article:tag" content="filesystem" />

<meta property="article:tag" content="hadoop" />



<meta name="referrer" content="strict-origin-when-cross-origin">
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://pierrezemb.fr/rss.xml">
  <link rel="alternate" type="application/atom+xml" title="RSS" href="https://pierrezemb.fr/atom.xml">
  <style>
    :root {
    --width: 800px;
    --font-main: Verdana, sans-serif;
    --font-secondary: Verdana, sans-serif;
    --font-scale: 1em;
    --background-color: #fff;
    --heading-color: #222;
    --text-color: #444;
    --link-color: #3273dc;
    --visited-color: #8b6fcb;
    --code-background-color: #f2f2f2;
    --code-color: #222;
    --blockquote-color: #222;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --background-color: #01242e;
      --heading-color: #eee;
      --text-color: #ddd;
      --link-color: #8cc2dd;
      --visited-color: #8b6fcb;
      --code-background-color: #000;
      --code-color: #ddd;
      --blockquote-color: #ccc;
    }
  }

  body {
    font-family: var(--font-secondary);
    font-size: var(--font-scale);
    margin: auto;
    padding: 20px;
    max-width: var(--width);
    text-align: left;
    background-color: var(--background-color);
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    color: var(--text-color);
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-main);
    color: var(--heading-color);
  }

  a {
    color: var(--link-color);
    cursor: pointer;
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
  }

  nav a {
    margin-right: 8px;
  }

  nav span.active {
    font-weight: bold;
    margin-right: 10px;
  }
  strong,
  b {
    color: var(--heading-color);
  }

  button {
    margin: 0;
    cursor: pointer;
  }

  main {
    line-height: 1.6;
  }

  table {
    width: 100%;
  }

  hr {
    border: 0;
    border-top: 1px dashed;
  }

  img {
    max-width: 100%;
  }

  pre code {
    background-color: var(--code-background-color);
    color: var(--code-color);
    display: block;
    padding: 20px;
    white-space: pre-wrap;
    font-size: 0.875rem;
    overflow-x: auto;
  }

  code {
    font-family: monospace;
    padding: 2px;
    background-color: var(--code-background-color);
    color: var(--code-color);
    border-radius: 3px;
  }

  blockquote {
    border-left: 1px solid #999;
    color: var(--code-color);
    padding-left: 20px;
    font-style: italic;
  }

  footer {
    padding: 25px 0;
    text-align: center;
  }

  .title:hover {
    text-decoration: none;
  }

  .title h1 {
    font-size: 1.5em;
  }

  .inline {
    width: auto !important;
  }

  .highlight,
  .code {
    padding: 1px 15px;
    background-color: var(--code-background-color);
    color: var(--code-color);
    border-radius: 3px;
    margin-block-start: 1em;
    margin-block-end: 1em;
    overflow-x: auto;
  }

  /* blog post list */
  ul.blog-posts {
    list-style-type: none;
    padding: unset;
  }

  ul.blog-posts li {
    display: flex;
  }

  ul.blog-posts li span {
    flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
    color: var(--visited-color);
  }

  .tags {
    font-size: smaller;
  }

  </style><link rel="stylesheet" href="/custom.css">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/js/all.min.js"></script>

</head>
<body>
  <header>
  <a href="https://pierrezemb.fr/" class="title">
    <h1>Pierre Zemb&#x27;s Blog</h1>
  </a>
  <nav aria-label="site">
      <a href="https://pierrezemb.fr/">Home</a>
      <a href="https://pierrezemb.fr/posts/">Blog</a>
      <a href="https://pierrezemb.fr/tags">Tags</a>
      <a href="https://pierrezemb.fr/talks/">Talks</a>
      <a href="https://pierrezemb.fr/podcasts/">Podcasts</a>
      <a href="https://pierrezemb.fr/contact/">Contact</a>
  </nav>
</header>
<h1>What can be gleaned about GFS successor codenamed Colossus?</h1>
      <p>
        <i>
          <time datetime="2019-08-04T15:07:11+02:00" pubdate>04 Aug, 2019</time>
        </i>
      </p>
    <details open>
      <summary>Table of contents</summary>
    <ul>
        <li>
          <a href="https://pierrezemb.fr/posts/colossus-google/#hadoop-s-story">Hadoop&#x27;s story</a>
        </li>
        <li>
          <a href="https://pierrezemb.fr/posts/colossus-google/#is-hadoop-still-revelant">Is Hadoop still revelant?</a>
        </li>
        <li>
          <a href="https://pierrezemb.fr/posts/colossus-google/#well-let-s-put-hadoop-in-kubernetes">Well, let&#x27;s put Hadoop in Kubernetes</a>
        </li>
        <li>
          <a href="https://pierrezemb.fr/posts/colossus-google/#how-gfs-evolved-within-google">How GFS evolved within Google</a>
        <ul>
            <li>
              <a href="https://pierrezemb.fr/posts/colossus-google/#technical-overview">Technical overview</a>
            </li>
            <li>
              <a href="https://pierrezemb.fr/posts/colossus-google/#deployments">Deployments</a>
            </li>
            <li>
              <a href="https://pierrezemb.fr/posts/colossus-google/#migration">Migration</a>
            </li>
        </ul>
        </li>
        <li>
          <a href="https://pierrezemb.fr/posts/colossus-google/#is-there-an-open-source-effort-to-create-a-colossus-like-dfs">Is there an open-source effort to create a Colossus-like DFS?</a>
        </li>
    </ul>
    </details>
  <main>
    <p>In the last few months, there has been numerous blogposts about the end of the Hadoop-era. It is true that:</p>
<ul>
<li><a href="https://www.theregister.co.uk/2019/06/06/cloudera_ceo_quits_customers_delay_purchase_orders_due_to_roadmap_uncertainty_after_hortonworks_merger/">Health of Hadoop-based companies are publicly bad</a></li>
<li>Hadoop has a bad publicity with headlines like <a href="https://techwireasia.com/2019/07/what-does-the-death-of-hadoop-mean-for-big-data/">'What does the death of Hadoop mean for big data?'</a></li>
</ul>
<p>Hadoop, as a distributed-system, <strong>is hard to operate, but can be essential for some type of workload</strong>. As Hadoop is based on GFS, we can wonder how GFS evolved inside Google.</p>
<h2 id="hadoop-s-story"><a class="zola-anchor" href="#hadoop-s-story" aria-label="Anchor link for: hadoop-s-story">ðŸ”—</a>Hadoop's story</h2>
<p>Hadoop is based on a Google's paper called <a href="https://static.googleusercontent.com/media/research.google.com/en//archive/gfs-sosp2003.pdf">The Google File System</a> published in 2003. There are some key-elements on this paper:</p>
<ul>
<li>It was designed to be deployed with <a href="https://ai.google/research/pubs/pub43438">Borg</a>,</li>
<li>to "<a href="https://queue.acm.org/detail.cfm?id=1594206">simplify the overall design problem</a>", they:
<ul>
<li>implemented a single master architecture</li>
<li>dropped the idea of a full POSIX-compliant file system</li>
</ul>
</li>
<li>Metadatas are stored in RAM in the master,</li>
<li>Datas are stored within chunkservers,</li>
<li>There is no YARN or Map/Reduce or any kind of compute capabilities.</li>
</ul>
<h2 id="is-hadoop-still-revelant"><a class="zola-anchor" href="#is-hadoop-still-revelant" aria-label="Anchor link for: is-hadoop-still-revelant">ðŸ”—</a>Is Hadoop still revelant?</h2>
<p>Google with GFS and the rest of the world with Hadoop hit some issues:</p>
<ul>
<li>One (Metadata) machine is not large enough for large FS,</li>
<li>Single bottleneck for metadata operations,</li>
<li>Not appropriate for latency sensitive applications,</li>
<li>Fault tolerant not HA,</li>
<li>Unpredictable performance,</li>
<li>Replication's cost,</li>
<li>HDFS Write-path pipelining,</li>
<li>fixed-size of blocks,</li>
<li>cost of operations,</li>
<li>...</li>
</ul>
<p>Despite all the issues, Hadoop is still relevant for some usecases, such as Map/Reduce, or if you need Hbase as a main datastore. There is stories available online about the scalability of Hadoop:</p>
<ul>
<li><a href="https://blog.twitter.com/engineering/en_us/topics/infrastructure/2017/the-infrastructure-behind-twitter-scale.html">Twitter has multiple clusters storing over 500 PB (2017)</a></li>
<li>whereas Google prefered to <a href="https://cloud.google.com/files/storage_architecture_and_challenges.pdf">"Scaled to approximately 50M files, 10P" to avoid "added management overhead" brought by the scaling.</a></li>
</ul>
<p>Nowadays, Hadoop is mostly used for Business Intelligence or to create a datalake, but at first, GFS was designed to provide a distributed file-system on top of commodity servers.</p>
<p>Google's developers were/are deploying applications into "containers", meaning that <strong>any process could be spawned somewhere into the cloud</strong>. Developers are used to work with the file-system abstraction, which provide a layer of durability and security. To mimic that process, they developed GFS, so that <strong>processes don't need to worry about replication</strong> (like Bigtable/HBase).</p>
<p>This is a promise that, I think, was forgotten. In a world where Kubernetes <em>seems</em> to be the standard, <strong>the need of a global distributed file-system is now higher than before</strong>. By providing a "file-system" abstraction for applications deployed in Kubernetes, we may be solving many problems Kubernetes-adopters are hitting, such as:</p>
<ul>
<li>How can I retrieve that particular file for my applications deployed on the other side of the Kubernetes cluster?</li>
<li>Should I be moving that persistent volume over my slow network?</li>
<li>What is happening when <a href="https://github.com/dgraph-io/dgraph/issues/2698">Kubernetes killed an alpha pod in the middle of retrieving snapshot</a>?</li>
</ul>
<h2 id="well-let-s-put-hadoop-in-kubernetes"><a class="zola-anchor" href="#well-let-s-put-hadoop-in-kubernetes" aria-label="Anchor link for: well-let-s-put-hadoop-in-kubernetes">ðŸ”—</a>Well, let's put Hadoop in Kubernetes</h2>
<p>Putting a distributed systems inside Kubernetes is currently a unpleasant experience because of the current tooling:</p>
<ul>
<li>Helm is not helping me expressing my needs as a distributed-system operator. Even worse, the official <a href="https://github.com/helm/charts/tree/master/stable/hadoop">Helm chart for Hadoop is limited to YARN and Map/Reduce and "Data should be read from cloud based datastores such as Google Cloud Storage, S3 or Swift."</a></li>
<li>Kubernetes Operators has no access to key-metrics, so they cannot watch over your applications correctly. It is only providing a "day-zero to day-two" good experience,</li>
<li>Google seems to <a href="https://news.ycombinator.com/item?id=16971959">not be using the Operators design internally</a>.</li>
<li><a href="https://www.ibm.com/cloud/blog/new-builders/database-deep-dives-couchdb">CouchDB developers</a> are saying that:
<ul>
<li>"For certain workloads, the technology isnâ€™t quite there yet"</li>
<li>"In certain scenarios that are getting smaller and smaller, both Kubernetes and Docker get in the way of that. At that point, CouchDB gets slow, or you get timeout errors, that you canâ€™t explain."</li>
</ul>
</li>
</ul>
<h2 id="how-gfs-evolved-within-google"><a class="zola-anchor" href="#how-gfs-evolved-within-google" aria-label="Anchor link for: how-gfs-evolved-within-google">ðŸ”—</a>How GFS evolved within Google</h2>
<h3 id="technical-overview"><a class="zola-anchor" href="#technical-overview" aria-label="Anchor link for: technical-overview">ðŸ”—</a>Technical overview</h3>
<p>As GFS's paper was published in 2003, we can ask ourselves if GFS has evolved. And it did! The sad part is that there is only a few informations about this project codenamed <code>Colossus</code>. There is no papers, and not a lot informations available, here's what can be found online:</p>
<ul>
<li>
<p>From <a href="https://cloud.google.com/files/storage_architecture_and_challenges.pdf">Storage Architecture and Challenges(2010)</a>:</p>
<ul>
<li>They moved from full-replication to <a href="https://en.wikipedia.org/wiki/Reed%E2%80%93Solomon_error_correction">Reed-Salomon</a>. This feature is acually in <a href="https://hadoop.apache.org/docs/r3.0.0/hadoop-project-dist/hadoop-hdfs/HDFSErasureCoding.html">Hadoop 3</a>,</li>
<li>replication is handled by the client, instead of the pipelining,</li>
<li>the metadata layer is automatically sharded. We can find more informations about that in the next ressource!</li>
</ul>
</li>
<li>
<p>From <a href="http://www.pdsw.org/pdsw-discs17/slides/PDSW-DISCS-Google-Keynote.pdf">Cluster-Level Storage @ Google(2017)</a>:</p>
<ul>
<li>GFS master replaced by Colossus</li>
<li>GFS chunkserver replaced by D</li>
<li>Colossus rebalances old, cold data</li>
<li>distributes newly written data evenly across disks</li>
<li>Metadatas are stored into BigTable. each Bigtable row corresponds to a single file.</li>
</ul>
</li>
</ul>
<p>The "all in RAM" GFS master design was a severe single-point-of-failure, so getting rid of it was a priority. They didn't had a lof of options for a scalable and rock-solid datastore <strong>beside BigTable</strong>. When you think about it, a key/value datastore is a great replacement for a distributed file-system master:</p>
<ul>
<li>automatic sharding of regions,</li>
<li>scan capabilities for files in the same "directory",</li>
<li>lexical ordering,</li>
<li>...</li>
</ul>
<p>The funny part is that they now need a Colossus for Colossus. The only things saving them is that storing the metametametadata (the metadata of the metadata of the metadata) can be hold in Chubby.</p>
<ul>
<li>
<p>From <a href="https://queue.acm.org/detail.cfm?id=1594206">GFS: Evolution on Fast-forward(2009)</a></p>
<ul>
<li>they moved to chunks of 1MB of files, as the limitations of the master disappeared. This is also allowing Colossus to support latency sensitive applications,</li>
</ul>
</li>
<li>
<p>From <a href="https://github.com/cockroachdb/cockroach/issues/243#issuecomment-91575792">a Github comment on Colossus</a>:</p>
<ul>
<li>File reconstruction from Reed-Salomnon was performed on both client-side and server-side</li>
<li>on-the-fly recovery of data is greatly enhanced by this data layout(Reed Salomon)</li>
</ul>
</li>
<li>
<p>From a <a href="https://news.ycombinator.com/item?id=20135927">Hacker News comment</a>:</p>
<ul>
<li>Colossus and D are two separate things.</li>
</ul>
</li>
<li>
<p>From <a href="https://cloud.google.com/blog/products/storage-data-transfer/a-peek-behind-colossus-googles-file-system">Colossus under the hood: a peek into Googleâ€™s scalable storage system</a>:</p>
<ul>
<li>Colossus's Control Plane is a scalable metadata service, which consists of many Curators. Clients talk directly to curators for control operations, such as file creation, and can scale horizontally.</li>
<li>background storage managers called Custodians, there are handling tasks like disk space balancing and RAID reconstruction.</li>
<li>Applications needs to specifies I/O, availability, and durability requirements</li>
</ul>
</li>
</ul>
<p>What is that "D"?</p>
<ul>
<li>
<p>From <a href="https://landing.google.com/sre/sre-book/chapters/production-environment/">The Production Environment at Google, from the Viewpoint of an SRE</a>:</p>
<ul>
<li>D stands for <em>Disk</em>,</li>
<li>D is a fileserver running on almost all machines in a cluster.</li>
</ul>
</li>
<li>
<p>From <a href="https://medium.com/@jerub/the-production-environment-at-google-8a1aaece3767">The Production Environment at Google</a>:</p>
<ul>
<li>D is more of a block server than a file server</li>
<li>It provides nothing apart from checksums.</li>
</ul>
</li>
</ul>
<h3 id="deployments"><a class="zola-anchor" href="#deployments" aria-label="Anchor link for: deployments">ðŸ”—</a>Deployments</h3>
<!-- I think the team that's pushing the forefront of something k8s-like for persistency/durability is... the Colossus/D team at Google, who have been running storage servers managed by Borg for almost a decade now :) Problem is, it's not k8s. But could tell us what that roadmap is.  -->
<p>How everything is deployed? Using Borg!</p>
<h3 id="migration"><a class="zola-anchor" href="#migration" aria-label="Anchor link for: migration">ðŸ”—</a>Migration</h3>
<p>The migration process is described in the now free <a href="https://static.googleusercontent.com/media/sre.google/en//static/pdf/case-studies-infrastructure-change-management.pdf">Case Studies in Infrastructure Change Management</a> book.</p>
<h2 id="is-there-an-open-source-effort-to-create-a-colossus-like-dfs"><a class="zola-anchor" href="#is-there-an-open-source-effort-to-create-a-colossus-like-dfs" aria-label="Anchor link for: is-there-an-open-source-effort-to-create-a-colossus-like-dfs">ðŸ”—</a>Is there an open-source effort to create a Colossus-like DFS?</h2>
<p>I did not found any point towards a open-source version of Colossus, beside some work made for <a href="https://github.com/baidu/bfs">The Baidu File System</a> in which the Nameserver is implemented as a raft group.</p>
<p>There is <a href="https://www.slideshare.net/HadoopSummit/scaling-hdfs-to-manage-billions-of-files-with-distributed-storage-schemes">some work to add colossus's features in Hadoop</a> but based on the bad publicity Hadoop has now, I don't think there will be a lot of money to power those efforts.</p>
<p>I do think that rewriting an distributed file-system based on Colossus would be a huge benefit for the community:</p>
<ul>
<li>Reimplement D may be easy, my current question is <strong>how far can we use modern FS such as OpenZFS</strong> to facilitate the work? FS capabilities such as <a href="https://github.com/zfsonlinux/zfs/wiki/Checksums">OpenZFS checksums</a> seems pretty interesting.</li>
<li>To resolve the distributed master issue, we could use <a href="https://tikv.org/">Tikv</a> as a building block to provide an "BigTable experience" without the need of a distributed file-system underneath.</li>
</ul>
<p>But remember:</p>
<blockquote>
<p>Like crypto, Do not roll your own DFS!</p>
</blockquote>
<hr />
<p><strong>Thank you</strong> for reading my post! Feel free to react to this article, I am also available on <a href="https://twitter.com/PierreZ">Twitter</a> if needed.</p>

  </main>
  <p>
        Tags:
          <a href="https://pierrezemb.fr/tags/storage/">#storage</a>
          <a href="https://pierrezemb.fr/tags/distributed/">#distributed</a>
          <a href="https://pierrezemb.fr/tags/google/">#google</a>
          <a href="https://pierrezemb.fr/tags/filesystem/">#filesystem</a>
          <a href="https://pierrezemb.fr/tags/hadoop/">#hadoop</a>
  </p>
<footer>
    <p>Â© 2025 Pierre Zemb</p>
    <div class="social-links">
        <a href="https://github.com/PierreZ" target="_blank" rel="noopener noreferrer" title="GitHub" class="social-icon"><i class="fa-brands fa-github"></i></a>
        <a href="https://x.com/PierreZ" target="_blank" rel="noopener noreferrer" title="Twitter" class="social-icon"><i class="fa-brands fa-twitter"></i></a>
        <a href="https://bsky.app/profile/pierrezemb.fr" target="_blank" rel="noopener noreferrer" title="Bluesky" class="social-icon"><i class="fa-brands fa-bluesky"></i></i></a>
        <a href="/rss.xml" target="_blank" rel="noopener noreferrer" title="RSS Feed" class="social-icon"><i class="fa-solid fa-rss"></i></a>
    </div>
</footer>
<script defer data-domain="pierrezemb.fr" src="https://plausible.io/js/script.js"></script>
<script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
    mermaid.initialize({
        startOnLoad: true,
        theme: 'dark',
    });
</script>
<script>
    feather.replace();
</script></body>
</html>
